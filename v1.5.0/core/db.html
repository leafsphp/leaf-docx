<!DOCTYPE html>
<html>
  <head>
    <!-- Standard Meta -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1"
    />

    <link rel="image_src" type="image/jpeg" href="..\..\images\logo.png" />
    <link rel="shortcut icon" type="image/jpeg" href="..\..\images\logo.png" />

    <!-- Site Properities -->
    <meta name="generator" content="DocPad v6.79.4" />
    <title>Leaf DB</title>

    <meta name="description" content="Leaf is a PHP starter kit that helps you quickly write simple yet powerful web applications and APIs without any framework.">
    <meta name="keywords" content="PHP, backend, library, framework, api, server, routing">

    <script src="..\..\javascript\library\detect.min.js"></script>
    <script src="..\..\javascript\library\jquery.min.js"></script>
    <script src="..\..\javascript\library\clipboard.min.js"></script>
    <script src="..\..\javascript\library\cookie.min.js"></script>
    <script src="..\..\javascript\library\easing.min.js"></script>
    <script src="..\..\javascript\library\highlight.min.js"></script>
    <script src="..\..\javascript\library\history.min.js"></script>
    <script src="..\..\javascript\library\tablesort.min.js"></script>
    <script src="..\..\javascript\library\underscore.min.js"></script>

    <script src="..\..\dist\semantic.min.js"></script>

    <script src="..\..\javascript\docs.js"></script>

    <link
      rel="stylesheet"
      type="text/css"
      class="ui"
      href="..\..\dist\semantic.min.css"
    />

    <link rel="stylesheet" type="text/css" href="..\..\stylesheets\docs.css" />
    <link rel="stylesheet" type="text/css" href="..\..\stylesheets\rtl.css" />

    
  </head>
  <body id="example" class="cla" ontouchstart="">
    <div class="ui vertical inverted sidebar menu" id="toc">
      <div class="item">
        <a class="ui logo icon image" href="..\index.html">
          <img alt="pic" src="..\..\images\logo.png" />
        </a>
        <a href="..\index.html"><b>Leaf Docs</b></a>
      </div>
      <a class="item" href="../introduction/getting-started.html">
        <b>Getting Started</b>
      </a>
      <a class="item" href="https://github.com/leafsphp/leaf/blob/v1.5.0/CHANGELOG.md">
      <b>New in v1.5.0</b>
    </a>
      <div class="item">
        <div class="header">Versions</div>
        <div class="menu">
            <a class="item" href="../../v1.2.0/index.html">Version 1.2.0</a>
            <a class="item" href="../../v1.3.0/index.html">Version 1.3.0</a>
            <a class="item" href="../../v1.4.1/index.html">Version 1.4.1</a>
            <a class="item" href="../../v1.4.2/index.html">Version 1.4.2</a>
            <a class="item" href="../../v1.5.0/index.html">Version 1.5.0</a>
        </div>
      </div>

      <div class="item">
        <div class="header">Introduction</div>
        <div class="menu">
          <a class="item" href="../introduction/re-routing-to-index.html">Re-routing to index</a>
          <a class="item" href="../introduction/index.php.html">Your First Leaf App</a>
          <!-- <a class="item" href="../introduction/init.html">Class Initialisations</a> -->
        </div>
      </div>

      <div class="item">
        <div class=" header">Config</div>
        <div class="menu">
          <a class="item" href="../config/database.html">Database</a>
          <a class="item" href="../config/app-headers.html">App Headers</a>
        </div>
      </div>

      <div class="item">
        <div class=" header">Core Modules</div>
        <div class="menu">
          <a class="item" href="../core/simple-authentication.html">Simple Authentication</a>
          <a class="item" href="../core/form.html">Simple field Validation</a>
          <a class="item" href="../core/date-manipulation.html">Date Manipulation</a>
          <a class="item" href="../core/request.html">Request</a>
          <a class="item" href="../core/response.html">Response</a>
          <a class="item" href="../core/session.html">Session</a>
          <a class="item" href="../core/fs.html">File System</a>
          <a class="item" href="../core/token.html">Leaf Token</a>
          <a class="item" href="../core/api-controller.html">Core Api Controller</a>
          <a class="item" href="../core/controller.html">Core Controller</a>
          <a class="item" href="../core/model.html">Core Model</a>
        </div>
      </div>

      <div class="item">
        <div class=" header">Routing</div>
        <div class="menu">
          <a class="item" href="../routing/simple-routing.html">Simple routing</a>
          <a class="item" href="../routing/404-handling.html">404 handling</a>
          <a class="item" href="../routing/sub-routing.html">Sub routing</a>
          <a class="item" href="../routing/named-parameters.html">Named parameters</a>
          <a class="item" href="../routing/pcre-patterns.html">PCRE based patterns</a>
          <a class="item" href="../routing/optional-subpatterns.html">Optional Sub-patterns</a>
          <a class="item" href="../routing/controllers.html">Using Controllers</a>
          <a class="item" href="../routing/library-integration.html">Integrating with other libraries</a>
          <a class="item" href="../routing/middleware.html">Using Middleware</a>
          <a class="item" href="../routing/sub-folder.html">Sub-folder Support</a>
        </div>
      </div>

      <div class="item">
        <div class=" header">Helpers</div>
        <div class="menu">
          <a class="item" href="../helpers/constants.html">Constants</a>
          <a class="item" href="../helpers/jwt.html">JWT</a>
        </div>
      </div>
    </div>

    <div class="ui black big launch right attached fixed button">
      <i class="content icon"></i>
      <span class="text">Menu</span>
    </div>

    <div class="ui fixed inverted main menu">
      <div class="ui container">
        <a class="launch icon item">
          <i class="content icon"></i>
        </a>

        <div class="item">
          Leaf DB
        </div>
        <div class="right menu">
          <div class="vertically fitted borderless item">
            <iframe class="github" src="https://ghbtns.com/github-btn.html?user=leafsphp&repo=leaf&type=star&count=true" allowtransparency="true" frameborder="0" scrolling="0" width="100" height="20"></iframe>
          </div>
        </div>
      </div>
    </div>

    <div class="pusher">
      <div class="full height">
        <div class="toc">
          <div class="ui vertical inverted menu">
            <div class="item">
              <a class="ui logo icon image" href="..\index.html">
                <img alt="pic" src="..\..\images\logo.png" />
              </a>
              <a href="..\index.html"><b>Leaf Docs</b></a>
            </div>
            <a class="item" href="../introduction/getting-started.html">
              <b>Getting Started</b>
            </a>
            <a class="item" href="https://github.com/leafsphp/leaf/blob/v1.5.0/CHANGELOG.md">
              <b>New in v1.5.0</b>
            </a>
            <div class="item">
              <div class="header">Versions</div>
              <div class="menu">
            <a class="item" href="../../v1.2.0/index.html">Version 1.2.0</a>
            <a class="item" href="../../v1.3.0/index.html">Version 1.3.0</a>
            <a class="item" href="../../v1.4.1/index.html">Version 1.4.1</a>
            <a class="item" href="../../v1.4.2/index.html">Version 1.4.2</a>
            <a class="item" href="../../v1.5.0/index.html">Version 1.5.0</a>
        </div>
            </div>

            <div class="item">
              <div class="header">Introduction</div>
              <div class="menu">
                <a class="item" href="../introduction/re-routing-to-index.html">Re-routing to index</a>
                <a class="item" href="../introduction/index.php.html">Your First Leaf App</a>
                <!-- <a class="item" href="../introduction/init.html">Class Initialisations</a> -->
              </div>
            </div>

            <div class="item">
              <div class=" header">Config</div>
              <div class="menu">
                <a class="item" href="../config/database.html">Database</a>
                <a class="item" href="../config/app-headers.html">App Headers</a>
              </div>
            </div>

            <div class="item">
              <div class=" header">Core Modules</div>
              <div class="menu">
                <a class="item" href="../core/form.html">Simple field Validation</a>
                <a class="item" href="../core/date-manipulation.html">Date Manipulation</a>
                <a class="item" href="../core/db.html">Database</a>
                <a class="item" href="../core/auth.html">Leaf Auth</a>
                <a class="item" href="../core/request.html">Request</a>
                <a class="item" href="../core/response.html">Response</a>
                <a class="item" href="../core/session.html">Session</a>
                <a class="item" href="../core/fs.html">File System</a>
                <a class="item" href="../core/token.html">Leaf Token</a>
                <a class="item" href="../core/api-controller.html">Core Api Controller</a>
                <a class="item" href="../core/controller.html">Core Controller</a>
                <a class="item" href="../core/model.html">Core Model</a>
                <a class="item" href="../core/simple-authentication.html">Simple Authentication</a>
              </div>
            </div>

            <div class="item">
              <div class=" header">Routing</div>
              <div class="menu">
                <a class="item" href="../routing/simple-routing.html">Simple routing</a>
                <a class="item" href="../routing/404-handling.html">404 handling</a>
                <a class="item" href="../routing/sub-routing.html">Sub routing</a>
                <a class="item" href="../routing/named-parameters.html">Named parameters</a>
                <a class="item" href="../routing/pcre-patterns.html">PCRE based patterns</a>
                <a class="item" href="../routing/optional-subpatterns.html">Optional Sub-patterns</a>
                <a class="item" href="../routing/controllers.html">Using Controllers</a>
                <a class="item" href="../routing/library-integration.html">Integrating with other libraries</a>
                <a class="item" href="../routing/middleware.html">Using Middleware</a>
                <a class="item" href="../routing/sub-folder.html">Sub-folder Support</a>
              </div>
            </div>

            <div class="item">
              <div class=" header">Helpers</div>
              <div class="menu">
                <a class="item" href="../helpers/constants.html">Constants</a>
                <a class="item" href="../helpers/jwt.html">JWT</a>
              </div>
            </div>
          </div>
        </div>
        <div class="article">
          <div class="ui masthead vertical segment">
            <div class="ui container">
              <div class="introduction">
                <h1 class="ui header">
                  Leaf DB

                  <div class="sub header">
                    Leaf's simple database query builder
                    <iframe class="github" src="https://ghbtns.com/github-btn.html?user=leafsphp&repo=leaf&type=star&count=true&amp;" allowtransparency="true" frameborder="0" scrolling="0" width="100" height="20"></iframe>
                  </div>
                </h1>

                <div class="ui hidden divider"></div>

                <!-- <div class="ui right floated main menu">
        <a class="bug popup icon item" data-content="Edit This Page" href="#">
          <i class="edit icon"></i>
        </a>
      </div> -->
              </div>
            </div>
          </div>

          <div class="main ui intro container">
            <h2 class="ui dividing header">Leaf DB Overview</h2>

            <div class="no example">
              <h4 class="ui header">Introduction</h4>
              <p>
                Leaf's "simple query builder" provides a convenient but usual way to quickly create and run database queries. It can be used to perform most database operations in your app.
              </p>
              <p>
                Leaf's "simple query builder" currently supports Mysqli and PDO connections, though we still recommend using Mysqli. There's no need to worry about SQL injection as parameter binding is also supported and easy to useðŸ˜‰ðŸ’ª
              </p>
            </div>

            <h2 class="ui dividing header">Init</h2>

            <div class="no example">
              <h4 class="ui header">Initialising Leaf DB</h4>
              <p>
                Leaf DB has 2 different packages, 1 for mysqli and the other for PDO. So you can import which ever package you wish to use. <span style="color: red;">Leaf recommends using the mysqli package.</span>
              </p>
              <div class="ignored code" data-type="php">
use Leaf\Core\DB\Mysqli;

$db = new Mysqli();
              </div>
              <div class="ignored code" data-type="php">
use Leaf\Core\DB\PDO;

$db = new PDO();
              </div>
              <p>
                Both DB:PDO and DB:Mysqli use the same methods, so all the code below works the same for whichever you're using. We'll alert you if something works differently.
              </p>
            </div>

            <div class="no example">
              <h4 class="ui header">DB connection</h4>
              <p>
                The first thing you need to do to use Leaf DB is to connect to your database. This can be achieved with <code>connect()</code><br>
              </p>
              <div class="ignored code" data-type="php">
                use Leaf\Core\DB\Mysqli;
                
                $db = new Mysqli();
                $db->connect($host, $user, $password, $dbname);
              </div>
              <div class="ignored code" data-type="php">
                  use Leaf\Core\DB\PDO;
                  
                  $db = new PDO();
                  $db->connect($host, $dbname, $user, $password);
                </div>
                This will set the connection for use within Leaf DB, but if you also want to save this connection in a variable, you can do so.
                <div class="ignored code" data-type="php">
                  $connection = $db->connect($host, $dbname, $user, $password);
                </div>
            </div>

            <h2 class="ui dividing header">Queries</h2>

            <div class="no example">
              <h4 class="ui header">Making simple queries</h4>
              <p>
                Queries with with Leaf DB are much like what you're used to. Though a query builder, we wan't to maintain the flexibility of normal database queries,
                hence, we provided the <code>query()</code> method to make your normal database queries.
              </p>
              <div class="ignored code" data-type="php">
$db = new Leaf\Core\DB\Mysqli();
$db->connect($host, $user, $password, $dbname);

$leaf->post('/users/all', function() use($db) {
  $users = $db->query("SELECT username FROM users")->fetchAll();
});
                </div>
                <p>
                  As normal as this seems, we take it a step further by providing you with a much simpler way to use prepared statements.
                </p>
                <div class="ignored code" data-type="php">
$db = new Leaf\Core\DB\Mysqli();
$db->connect($host, $user, $password, $dbname);

$leaf->post('/users/{id}', function($id) use($db) {
  $users = $db->query("SELECT username FROM users WHERE id = ?", [$id])->fetchAll();
});
                </div>
                <p>
                  We've looked at making queries, but then <code>query()</code> still makes you type out whatever query you need 
                  to use. It's certainly easier than raw queries, but it's nothing impressive. Below are some of Leaf DB's handy methods to make
                  queries even easier.ðŸ’ªðŸ˜‰
                </p>
            </div>

            <h2 class="ui dividing header">Retrieving Data</h2>
            <p>
              If you're attempting to use this, you've probably seen or used SELECT statements before. Leaf DB has provided an even easier 
              way to use select.
            </p>
            <div class="ignored code" data-type="php">
              $db->select();
            </div>

            <div class="no example">
              <h4 class="ui header">Getting all rows from a table</h4>
              <p>
                To do this, we use the <code>select()</code> method we saw above. All that we have to do is to pass in the table we 
                want to retrieve. For example, to get all users from the "users" table, we simply do:
              </p>
              <div class="ignored code" data-type="php">
                $db->select("users");
              </div>
              <p>
                To actually get the results, we'll have to chain <code>fetchAll()</code> to the select method. <code>fetchAll()</code>
                does the same thing that <code>mysqli_fetch_all()</code> does to an mysqli result
              </p>
              <div class="ignored code" data-type="php">
                $db->select("users")->fetchAll();
              </div>
              <p>
                To add a limit to the query, just use:
              </p>
              <div class="ignored code" data-type="php">
                $db->select("users", "*", "LIMIT 10")->fetchObj();
              </div>
            </div>

            <div class="no example">
              <h4 class="ui header">Getting a column from a table</h4>
              <p>
                Getting a single column, eg: getting all usernames from the users table
              </p>
              <div class="ignored code" data-type="php">
                $db->select("users", "username")->fetchAll();
              </div>
              <p>
                This is like saying <code>SELECT username FROM users</code>. You can also pass in multiple options
              </p>
              <div class="ignored code" data-type="php">
                $db->select("users", "username, email")->fetchAll();
              </div>
              <p>
                You can get all columns with:
              </p>
              <div class="ignored code" data-type="php">
                $db->select("users")->fetchAll();
                # or
                $db->select("users", "*")->fetchAll();
              </div>
            </div>

            <div class="no example">
              <h4 class="ui header">Getting a particular row from a table</h4>
              <p>
                Getting a particular row, eg: getting the user with the id of 1 from the users table. You acan achieve this with:
              </p>
              <div class="ignored code" data-type="php">
                $db->select("users", "*", "WHERE id = 2")->fetchObj();
              </div>
              <p>
                <code>fetchObj</code> does the same thing as <code>mysqli_fetch_obj</code> and <code>fetch(PDO::FETCH_OBJ)</code>
              </p>
              <p>
                If you don't need the whole row, you can use:
              </p>
              <div class="ignored code" data-type="php">
                $db->select("users", "username, email", "WHERE id = 2")->fetchObj();
              </div>
            </div>

            <h2 class="ui dividing header">Inserting Data</h2>

            <p>
              This operation uses INSERT. With Leaf DB:
            </p>
            <div class="ignored code" data-type="php">
              $db->insert();
            </div>

            <div class="no example">
              <h4 class="ui header">Inserting Data</h4>
              <p>
                We use Leaf DB's insert method which takes in a "table" to insert data, a "column" and it's "value"
              </p>
              <div class="ignored code" data-type="php">
                $db->insert("posts", "title", "This is post One");
              </div>
              <p>
                You can also add multiple columns like so:
              </p>
              <div class="ignored code" data-type="php">
                $db->insert("posts", "title, body", "post One, This is the body of post One");
              </div>
            </div>

            <h2 class="ui dividing header">Updating Data</h2>
            
            <p>
              This operation uses UPDATE. With Leaf DB:
            </p>
            <div class="ignored code" data-type="php">
              $db->update();
            </div>

            <div class="no example">
              <h4 class="ui header">Update</h4>
              <p>
                We use Leaf DB's update method which takes in a "table", a "column-value" to update and "conditions".
              </p>
              <div class="ignored code" data-type="php">
                $db->update("posts", "title = 'Post 1'", "title = 'Post One'");
              </div>
              <p>
                This will look for a post with the title of "Post One" and change it to "Post 1". <br>
                You can also have multiple options:
              </p>
              <div class="ignored code" data-type="php">
                $db->update("posts", "title = 'Post 1'", "id = '1'");
              </div>
            </div>

            <h2 class="ui dividing header">Deleting Data</h2>
            
            <p>
              This operation uses DELETE. With Leaf DB:
            </p>
            <div class="ignored code" data-type="php">
              $db->delete();
            </div>

            <div class="no example">
              <h4 class="ui header">Delete</h4>
              <p>
                We use Leaf DB's delete method which takes in a "table", and "conditions".
              </p>
              <div class="ignored code" data-type="php">
                $db->delete("posts", "title = 'Post 1'");
              </div>
              <p>
                This will look for a post with the title of "Post 1" and delete it. <br>
                You can also have multiple conditions:
              </p>
              <div class="ignored code" data-type="php">
                $db->update("posts", "title = 'Post 1' AND author = 'Mychi Darko'");
              </div>
            </div>

            <h2 class="ui dividing header">Others</h2>

            <div class="no example">
              <h4 class="ui header">Row Count</h4>
              <p>
                Get the number of rows from select
              </p>
              <div class="ignored code" data-type="php">
                $db->select("posts")->count();
              </div>
            </div>

            <div class="no example">
              <h4 class="ui header">Connection Close</h4>
              <p>
                Close the connection
              </p>
              <div class="ignored code" data-type="php">
                $db->close();
              </div>
            </div>

            <h2 class="ui dividing header">Next Steps</h2>

            <a href="../introduction/re-routing-to-index.html" style="font-size: 18px;">Re-routing to index.php</a><br />
            <a href="../routing/simple-routing.html" style="font-size: 18px;">Simple Routing</a><br />
            <a href="../core/request.html" style="font-size: 18px;">Request</a><br />
            <a href="../core/response.html" style="font-size: 18px;">Response</a>
          </div>

          <div class="ui  vertical footer segment">
            <div class="ui center aligned container">
              <img alt="pic" src="..\..\images\logo.png" class="ui centered mini image" />
              <div class="ui horizontal small divided link list">
                <a class="item" href="#" target="_blank">Free & Open Source (MIT)</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <script>
      window.less = {
        async: true,
        environment: "production",
        fileAsync: false,
        onReady: false,
        useFileCache: true
      };
    </script>

    <script src="..\..\javascript\library\less.min.js"></script>
  </body>
</html>
